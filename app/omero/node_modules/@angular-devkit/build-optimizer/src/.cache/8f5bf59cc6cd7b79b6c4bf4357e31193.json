{"remainingRequest":"/Users/moises/source/code.research/sails-hook-redbox-omero/app/omero/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/Users/moises/source/code.research/sails-hook-redbox-omero/app/omero/node_modules/uppy/lib/plugins/Dashboard/FileCard.js","dependencies":[{"path":"/Users/moises/source/code.research/sails-hook-redbox-omero/app/omero/node_modules/uppy/lib/plugins/Dashboard/FileCard.js","mtime":1521677671000},{"path":"/Users/moises/source/code.research/sails-hook-redbox-omero/app/omero/node_modules/cache-loader/dist/cjs.js","mtime":1528352013145},{"path":"/Users/moises/source/code.research/sails-hook-redbox-omero/app/omero/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar getFileTypeIcon = require('./getFileTypeIcon');\n\nvar _require = require('./icons'),\n    checkIcon = _require.checkIcon;\n\nvar _require2 = require('preact'),\n    h = _require2.h,\n    Component = _require2.Component;\n\nmodule.exports = function (_Component) {\n  _inherits(FileCard, _Component);\n\n  function FileCard(props) {\n    _classCallCheck(this, FileCard);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.meta = {};\n\n    _this.tempStoreMetaOrSubmit = _this.tempStoreMetaOrSubmit.bind(_this);\n    _this.renderMetaFields = _this.renderMetaFields.bind(_this);\n    _this.handleClick = _this.handleClick.bind(_this);\n    return _this;\n  }\n\n  FileCard.prototype.tempStoreMetaOrSubmit = function tempStoreMetaOrSubmit(ev) {\n    var file = this.props.files[this.props.fileCardFor];\n\n    if (ev.keyCode === 13) {\n      ev.stopPropagation();\n      ev.preventDefault();\n      this.props.fileCardDone(this.meta, file.id);\n      return;\n    }\n\n    var value = ev.target.value;\n    var name = ev.target.dataset.name;\n    this.meta[name] = value;\n  };\n\n  FileCard.prototype.renderMetaFields = function renderMetaFields(file) {\n    var _this2 = this;\n\n    var metaFields = this.props.metaFields || [];\n    return metaFields.map(function (field) {\n      return h(\n        'fieldset',\n        { 'class': 'uppy-DashboardFileCard-fieldset' },\n        h(\n          'label',\n          { 'class': 'uppy-DashboardFileCard-label' },\n          field.name\n        ),\n        h('input', { 'class': 'uppy-DashboardFileCard-input',\n          type: 'text',\n          'data-name': field.id,\n          value: file.meta[field.id],\n          placeholder: field.placeholder,\n          onkeyup: _this2.tempStoreMetaOrSubmit,\n          onkeydown: _this2.tempStoreMetaOrSubmit,\n          onkeypress: _this2.tempStoreMetaOrSubmit })\n      );\n    });\n  };\n\n  FileCard.prototype.handleClick = function handleClick(ev) {\n    var file = this.props.files[this.props.fileCardFor];\n    this.props.fileCardDone(this.meta, file.id);\n  };\n\n  FileCard.prototype.render = function render() {\n    var file = this.props.files[this.props.fileCardFor];\n\n    return h(\n      'div',\n      { 'class': 'uppy-DashboardFileCard', 'aria-hidden': !this.props.fileCardFor },\n      this.props.fileCardFor && h(\n        'div',\n        { style: 'width: 100%; height: 100%;' },\n        h(\n          'div',\n          { 'class': 'uppy-DashboardContent-bar' },\n          h(\n            'h2',\n            { 'class': 'uppy-DashboardContent-title' },\n            this.props.i18n('editing'),\n            ' ',\n            h(\n              'span',\n              { 'class': 'uppy-DashboardContent-titleFile' },\n              file.meta ? file.meta.name : file.name\n            )\n          ),\n          h(\n            'button',\n            { 'class': 'uppy-DashboardContent-back', type: 'button', title: this.props.i18n('finishEditingFile'),\n              onclick: this.handleClick },\n            this.props.i18n('done')\n          )\n        ),\n        h(\n          'div',\n          { 'class': 'uppy-DashboardFileCard-inner' },\n          h(\n            'div',\n            { 'class': 'uppy-DashboardFileCard-preview', style: { backgroundColor: getFileTypeIcon(file.type).color } },\n            file.preview ? h('img', { alt: file.name, src: file.preview }) : h(\n              'div',\n              { 'class': 'uppy-DashboardItem-previewIconWrap' },\n              h(\n                'span',\n                { 'class': 'uppy-DashboardItem-previewIcon', style: { color: getFileTypeIcon(file.type).color } },\n                getFileTypeIcon(file.type).icon\n              ),\n              h(\n                'svg',\n                { 'class': 'uppy-DashboardItem-previewIconBg', width: '72', height: '93', viewBox: '0 0 72 93' },\n                h(\n                  'g',\n                  null,\n                  h('path', { d: 'M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z', fill: '#FFF' }),\n                  h('path', { d: 'M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z', fill: '#E4E4E4' })\n                )\n              )\n            )\n          ),\n          h(\n            'div',\n            { 'class': 'uppy-DashboardFileCard-info' },\n            h(\n              'fieldset',\n              { 'class': 'uppy-DashboardFileCard-fieldset' },\n              h(\n                'label',\n                { 'class': 'uppy-DashboardFileCard-label' },\n                this.props.i18n('name')\n              ),\n              h('input', { 'class': 'uppy-DashboardFileCard-input',\n                type: 'text',\n                'data-name': 'name',\n                value: file.meta.name || '',\n                placeholder: this.props.i18n('name'),\n                onkeyup: this.tempStoreMetaOrSubmit,\n                onkeydown: this.tempStoreMetaOrSubmit,\n                onkeypress: this.tempStoreMetaOrSubmit })\n            ),\n            this.renderMetaFields(file)\n          )\n        ),\n        h(\n          'div',\n          { 'class': 'uppy-Dashboard-actions' },\n          h(\n            'button',\n            { 'class': 'UppyButton--circular UppyButton--blue uppy-DashboardFileCard-done',\n              type: 'button',\n              title: this.props.i18n('finishEditingFiles'),\n              onclick: this.handleClick },\n            checkIcon()\n          )\n        )\n      )\n    );\n  };\n\n  return FileCard;\n}(Component);\n//# sourceMappingURL=FileCard.js.map",null]}